#! /usr/bin/env bash
# shellcheck disable=SC2016

# check that DOTFILES variable is defined
# shellcheck disable=SC1090
source "${BASH_SOURCE%/*}/../check_dotfiles_variable.sh"

source "$DOTFILES/infra/scripts/prompts.sh"

# installation
command -v brew > /dev/null || {
  info '`brew` not installed, installing now...'
  if /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"; then
    success '`brew` successfully installed'
  else
    fail '`brew` failed to install'
  fi
}

info 'installing `brew` dependencies'
if brew bundle --file "$DOTFILES/Brewfile"; then
  success 'successfully installed `brew` dependencies'
else
  fail 'failed to install `brew` dependencies'
fi
